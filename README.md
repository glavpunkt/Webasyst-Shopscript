#Приложение Webasyst-Shopscript v2

# Структура
1. /_img_ Папка с лого
2. /_lib_ Основная папка с классами

    2.1 _Classes_ Папка для дополнительных классов плагина
    
    2.2 _config_ Обязательная папка с конфигурационными файлами
    
# Файлы

1. gpshippingShipping.class.php Основной класс
2. plugin.php Общие параметры плагина
3. settings.php Настройки плагина. Не может быть пустым

# Методы и хуки в основном классе

1. calculate() Обязательный метод. Возвращает массив с возможными доставками. Точка входа
2. allowedCurrency() и allowedWeightUnit () Обязательные методы. Возвращают текущую валюту и единицу веса.
3. readyPackage() Хук, срабатывает сразу ПОСЛЕ того как заказ в админке переводится в статус отправлен
4. requestedAddressFieldsForService() и customFieldsForService() Опциональные методы. Позволяют устанавливают дополнительные поля в зависимости от типа доставки.

    4.1 requestedAddressFieldsForService() Устанавливат дополнительные обязательные поля 
    
    4.2 customFieldsForService() Добавляет форму с выбором даты и интервала доставки для курьерской доставки
    
5. punktList() функция callback для файла настроек, возвращает список с доступными пунктами отгрузки заказа. Должен быть static

# Инструкция по использованию
1. Установить из магазина приложений 'Инсталлер'
2. Активировать плагин в настройках. Магазин - Настройки - Доставка - Добавить способ доставки - Доставка Главпункт
![скриншот](https://user-images.githubusercontent.com/28548919/79769132-6a1c5080-8334-11ea-8b61-c2eb994a524c.png)
3. Выбрать необходимые способы доставки. Для автоматической выгрузки заказов в ЛК главпункт указать логин и токен. Так же для выгрузки заказов с курьерской доставкой необходимо запрашивать дату и интервал доставки в нижней часте станице настроек плагина.
![скриншот](https://user-images.githubusercontent.com/28548919/79769343-a94aa180-8334-11ea-9b64-fd479128d869.png)

# Выгрузка заказов
После оформления заказа, в Магазине - Новые необходимо сменить статус заказа на "Отправлен". 
![скриншот](https://user-images.githubusercontent.com/28548919/79769601-0181a380-8335-11ea-88ce-898cd9b38fd0.png)
Для курьерской доставки необходимо указать дату доставки. 
![скриншот](https://user-images.githubusercontent.com/28548919/79769700-1f4f0880-8335-11ea-94cc-63b836f71d96.png)
Результат выгрузки будет виден после обновления заказа в разделе отправлен, в нижней части страницы с заказом.
![скриншот](https://user-images.githubusercontent.com/28548919/79769970-7228c000-8335-11ea-9d22-f7faef5a4583.png)

# Полезные ссылки на документацию
<a href="https://developers.webasyst.ru/docs/cookbook/plugins/shipping-plugins/">Разработка плагина доставки Shop-Script 8</a><br>
<a href="https://developers.webasyst.ru/forum/19278/shipping-plugins-new-features/">Документация о состояниях (статусах) заказа</a>